<!DOCTYPE html>

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

  <meta name="description" content="kpa1on的博客">


<link rel="alternate" href="/atom.xml" title="kpa1on&#39;s Blog" type="application/atom+xml">
<meta name="theme-color" content="#a1d0f6">
<title>APP测试-DIVA - kpa1on&#39;s Blog</title>
<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<link rel="shortcut icon" href="/favicon.png">

<link rel="stylesheet" href="/css/style.css">

<nav class="main-nav">
	
	    <a href="/">← 主页</a>
	
	
	    <a href="/">home</a>
	
	    <a href="/about/">about</a>
	
	    <a href="/tags/%20%7C%7C%20fa%20fa-tags">tags</a>
	
	    <a href="/categories/%20%7C%7C%20fa%20fa-th">categories</a>
	
	    <a href="/archives/%20%7C%7C%20fa%20fa-archive">archives</a>
	
	<a class="cta" href="/atom.xml" data-no-instant>订阅</a>
</nav>

<section id="wrapper">
    <article class="post">
    <header>
        
            <h1>APP测试-DIVA</h1>
        
        <h2 class="headline">Mar 22 2022
        
        </h2>
    </header>
</article>
<section id="post-body"><meta name="referrer" content="no-referrer"/>

<h3 id="DIVA简介"><a href="#DIVA简介" class="headerlink" title="DIVA简介"></a>DIVA简介</h3><p>DIVA（该死的不安全和易受攻击的应用程序）是故意设计的存在很多漏洞的Android app。</p>
<span id="more"></span>

<p>源代码链接：<a target="_blank" rel="noopener" href="https://github.com/payatu/diva-android">https://github.com/payatu/diva-android</a></p>
<p>apk文件链接：<a target="_blank" rel="noopener" href="http://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz">http://payatu.com/wp-content/uploads/2016/01/diva-beta.tar.gz</a></p>
<h3 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h3><ul>
<li>逍遥模拟器</li>
<li>JDK1.8</li>
<li>Apktool</li>
<li>dex2jar、jd-gui、Android-Killer</li>
</ul>
<h3 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h3><p>adb连接模拟器，adb.exe connect 127.0.0.1:21503，报错，原因是开放了另一个端口</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322182127651-1709294793.png" alt="image-20220322182127434"></p>
<p>换个端口就好了，因为有多个模拟器，占用的端口不一样</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322183553532-1260709617.png" alt="image-20220322183554442"></p>
<p>将apk放进模拟器，打开</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322182504954-46243243.png" alt="image-20220322182505484"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><h4 id="第一关-不安全的日志输出"><a href="#第一关-不安全的日志输出" class="headerlink" title="第一关 不安全的日志输出"></a>第一关 不安全的日志输出</h4><p>产生原因：由于app代码中将敏感信息（如凭据，会话ID，财务详细信息等）通过log.e输出，所以在app的表单中输入的内容，可以在相关的日志中输出。</p>
<p>这里模拟输入敏感信息“111”</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322183611807-1401167450.png" alt="image-20220322183612462"></p>
<p>通过<code>adb logcat</code>查看运行日志</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322183706432-1875151932.png" alt="image-20220322183707309"></p>
<p>把apk文件拖到Android-Killer，然后还原java代码，在<code>LogActivity#checkout</code>方法中发现，会将用户输入的credit输出到日志中</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322184235923-1347215088.png" alt="image-20220322184236504"></p>
<h4 id="第二关-硬编码-第一部分"><a href="#第二关-硬编码-第一部分" class="headerlink" title="第二关 硬编码-第一部分"></a>第二关 硬编码-第一部分</h4><p>硬编码是将数据直接嵌入到程序或其他可执行对象的源代码中的软件开发实践，与从外部获取数据或在运行时生成数据不同。 </p>
<p>随便输入</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322184605652-1512158428.png" alt="image-20220322184606248"></p>
<p>然后定位到源码<code>HardcodeActivity#access</code>方法中，发现vendor key的值</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322184651189-182372022.png" alt="image-20220322184651281"></p>
<p>提交</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322184736454-1262318612.png" alt="image-20220322184737128"></p>
<h4 id="第三关-不安全的数据存储-第一部分"><a href="#第三关-不安全的数据存储-第一部分" class="headerlink" title="第三关 不安全的数据存储-第一部分"></a>第三关 不安全的数据存储-第一部分</h4><p>产生原因：使用了<code>SharedPreferences</code>类，该类是Android平台上一个轻量级的存储类，主要是用来保存一些常用的配置，本例中是用该类存储了用户名和密码，因此是具有风险的。<code>SharedPreferences</code>类存储的数据会以.xml的形式存储在&#x2F;data&#x2F;data&#x2F;app的包名&#x2F;shared_prefs目录下。</p>
<p>首先随意输入用户名和密码点击保存</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322184924698-1218298847.png" alt="image-20220322184924591"></p>
<p>进入shell模式，在&#x2F;data&#x2F;data&#x2F;jakhar.aseem.diva&#x2F;shared_prefs&#x2F;目录中查看jakhar.aseem.diva_preferences.xml文件，也可以输入adb pull &#x2F;data&#x2F;data&#x2F;jakhar.aseem.diva&#x2F;shared_prefs .&#x2F;将文件复制出来查看，发现文件中保存了刚刚输入的用户名和密码。</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322185106189-1658036911.png" alt="image-20220322185107256"></p>
<p>查看源码</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322185224730-2122017400.png" alt="image-20220322185225572"></p>
<h4 id="第四关-不安全的数据存储-第二部分"><a href="#第四关-不安全的数据存储-第二部分" class="headerlink" title="第四关 不安全的数据存储-第二部分"></a>第四关 不安全的数据存储-第二部分</h4><p>产生原因：将敏感数据保存在本地的sqlite3数据库中，对应的数据库目录: &#x2F;data&#x2F;data&#x2F;app的包名&#x2F;databases</p>
<p>输入用户名和密码</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322185333786-597081479.png" alt="image-20220322185334417"></p>
<p>进入&#x2F;data&#x2F;data&#x2F;jakhar.aseem.diva&#x2F;databases&#x2F;目录中，将数据库文件ids2下载到本地，<code>adb pull /data/data/jakhar.aseem.diva/databases/ids2 .</code>，使用sqlite数据库管理工具打开即可查看到保存的用户名和密码。</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322213625748-1287546810.png" alt="image-20220322213625717"></p>
<p>在<code>InsecureDataStorage2Activity#saveCredentials</code>中可以看到，将输入的用户名和密码插入到sqlite3数据库。</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322214059131-1473243306.png" alt="image-20220322214059563"></p>
<h4 id="第五关-不安全的数据存储-第三部分"><a href="#第五关-不安全的数据存储-第三部分" class="headerlink" title="第五关 不安全的数据存储-第三部分"></a>第五关 不安全的数据存储-第三部分</h4><p>产生原因：将敏感数据保存在临时文件中，对应的临时文件目录: &#x2F;data&#x2F;data&#x2F;app的包名&#x2F;</p>
<p>输入用户名和密码</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322214604404-1922986992.png" alt="image-20220322214605016"></p>
<p>进入&#x2F;data&#x2F;data&#x2F;jakhar.aseem.diva&#x2F;目录中查看该目录下临时文件uinfo-1161629033tmp</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322214838647-178846512.png" alt="image-20220322214839395"></p>
<p>查看源码，在<code>InsecureDataStorage3Activity#saveCredentials</code>，代码将用户的输入保存到tmp文件中</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322215121757-1535698173.png" alt="image-20220322215122161"></p>
<h4 id="第六关-不安全的数据存储-第四部分"><a href="#第六关-不安全的数据存储-第四部分" class="headerlink" title="第六关 不安全的数据存储-第四部分"></a>第六关 不安全的数据存储-第四部分</h4><p> 产生原因：将敏感数据保存在sd卡中，对应的目录一般在：&#x2F;mnt&#x2F;sdcard，也可以通过logcat查看保存路径。</p>
<p>输入用户名和密码</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322215319072-1894776264.png" alt="image-20220322215319664"></p>
<p>进入&#x2F;mnt&#x2F;sdcard&#x2F;目录中，查看文件.unifo.txt</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322215455294-52795390.png" alt="image-20220322215456142"></p>
<p>查看源码，在<code>InsecureDataStorage4Activity#saveCredentials</code>，代码将用户名和密码保存在sd卡的.uinfo.txt文件中</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322215658926-1701769296.png" alt="image-20220322215659410"></p>
<h4 id="第七关-输入校验问题-第一部分"><a href="#第七关-输入校验问题-第一部分" class="headerlink" title="第七关 输入校验问题-第一部分"></a>第七关 输入校验问题-第一部分</h4><p>产生原因：某些不安全控件内输入sql或其他数据库的一些语句，因为在使用前未进行检验长度和过滤等操作，从而达到欺骗服务器执行恶意代码影响到数据库的数据。</p>
<p>首先输入test’和test’’试探一下，test’什么也不返回，而test’’会返回”not found”</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322220405275-20108047.png" alt="image-20220322220405444"></p>
<p>输入万能密码<code>test&#39; or &#39;1&#39;=&#39;1</code>尝试，返回了所有用户的数据</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322220539037-533361955.png" alt="image-20220322220539575"></p>
<p>在<code>SQLInjectionActivity#search</code>，可以看到直接将输入的用户名拼接在SQL语句后面，没有做任何过滤，导致SQL注入的发生。</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322221226886-308377082.png" alt="image-20220322221227874"></p>
<h4 id="第八关-输入校验问题-第二部分"><a href="#第八关-输入校验问题-第二部分" class="headerlink" title="第八关 输入校验问题-第二部分"></a>第八关 输入校验问题-第二部分</h4><p>产生原因：在处理转跳时存在漏洞，导致允许从http域跨向file域，实现跨域漏洞，在 File 域下，同源策略跨域访问则能够对私有目录文件进行访问</p>
<p>输入一段url点击可以看到访问了这个页面</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322221551589-1756382319.png" alt="image-20220322221552254"></p>
<p>将https&#x2F;http协议换成File协议，利用file协议读取之前存储在sd卡的账号文件&#x2F;mnt&#x2F;sdcard&#x2F;.uinfo.txt</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322221937197-860498897.png" alt="image-20220322221937870"></p>
<p>在<code>InputValidation2URISchemeActivity#get</code>，代码没有对输入的数据进行处理直接loadUrl</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322222225023-451516831.png" alt="image-20220322222226194"></p>
<h4 id="第九关-访问控制问题-第一部分"><a href="#第九关-访问控制问题-第一部分" class="headerlink" title="第九关 访问控制问题-第一部分"></a>第九关 访问控制问题-第一部分</h4><p>点击按钮</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322222520447-960683478.png" alt="image-20220322222521636"></p>
<p>这里我们要不使用按钮就获取到API凭据，先定位到<code>APICredsActivity</code>类名，</p>
<p>查看AndroidManifest.XML文件，找到了相关的activity</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322223823174-167174189.png" alt="image-20220322223824358"></p>
<p>通过观察代码发现，这个activity设置了intent filter，如果为一个Activity设置了IntentFilter，你就可以在应用内或者其他应用中，用特定的隐式Intent来启动这个Activity，如果没有为Activity设置IntentFilter，那么你就只能通过显示Intent来启动这个Activity。</p>
<p>adb启动activity组件，输入命令，即可启动APICredsActivity</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start jakhar.aseem.diva/.APICredsActivity</span><br><span class="line">或者</span><br><span class="line">adb shell am start -n jakhar.aseem.diva/.APICredsActivity -a jakhar.aseem.diva.action.VIEW_CREDS</span><br><span class="line">am start: 启动activity 管理工具</span><br><span class="line">-a：指定action</span><br><span class="line">-n：指定完整 component 名</span><br><span class="line">命令详情：https://developer.android.google.cn/studio/command-line/adb#am</span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322224436365-482229719.png" alt="image-20220322224436885"></p>
<h4 id="第十关-访问控制问题-第二部分"><a href="#第十关-访问控制问题-第二部分" class="headerlink" title="第十关 访问控制问题-第二部分"></a>第十关 访问控制问题-第二部分</h4><p>从题目描述可以知道，通过注册后才能拥有tveeter API Credentials，所以要通过不注册来获取API Credentials</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322224826718-716123326.png" alt="image-20220322224826794"></p>
<p>尝试上一关的方式，跳到了一个需要输入PIN的activity，这表明程序做了相应的措施</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322224932014-1898417047.png" alt="image-20220322224932400"></p>
<p>查看源码<code>APICreds2Activity</code>，获取到上一个activity传来的boolean值，并当该值为false时就获取到apikey</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322225415347-1032098981.png" alt="image-20220322225416042"></p>
<p>查看上一个activity，即<code>AccessControl2Activity</code>，在代码如下位置发现设置的boolean值</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322230827731-1688194136.png" alt="image-20220322230828762"></p>
<p>这个类中bool值是通过单选项来决定的，而且把值传给下个activity，这时我们可以使用–ez来传递一个boolean键值对，但是要获取到2131099686值对应的key值是什么，十进制2131099686转换为16进制0x7f060026，在AndroidKiller中搜索0x7f060026</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322231629730-1116343886.png" alt="image-20220322231629557"></p>
<p>得到对于的name值为chk_pin，再全局搜索name值，得到key为check_pin</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322231855197-108821087.png" alt="image-20220322231856128"></p>
<p>最后adb启动activity命令，成功弹出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -a jakhar.aseem.diva.action.VIEW_CREDS2 -n jakhar.aseem.diva/.APICreds2Activity --ez check_pin false</span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322232124534-182093013.png" alt="image-20220322232125667"></p>
<h4 id="第十一关-访问控制问题-第三部分"><a href="#第十一关-访问控制问题-第三部分" class="headerlink" title="第十一关 访问控制问题-第三部分"></a>第十一关 访问控制问题-第三部分</h4><p>根据题目的描述，这是个私人笔记app，一开始需要设置密码才能使用，现在我们尝试不设置密码就开始使用</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322232512207-651302979.png" alt="image-20220322232513013"></p>
<p>定位到类<code>NotesProvider</code>，对应到AndroidManifest.XML文件</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322233006812-1932681545.png" alt="image-20220322233008111"></p>
<p>代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;provider android:authorities=&quot;jakhar.aseem.diva.provider.notesprovider&quot; android:enabled=&quot;true&quot; android:exported=&quot;true&quot; android:name=&quot;jakhar.aseem.diva.NotesProvider&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>这里使用了ContentProvider，android:enabled表示是否能由系统初始化，android:exported表示是否能被其他应用使用，android:authorities标识这个ContentProvider，调用者可以根据这个标识来找到它，看到2个值都为true，我们就可以使用content:&#x2F;&#x2F;访问里面的数据了，查看包含content:&#x2F;&#x2F;的字符串文件&#x2F;smali&#x2F;jakhar&#x2F;aseem&#x2F;diva&#x2F;NotesProvider.smali</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322234114956-1692793041.png" alt="image-20220322234116133"></p>
<p>我们可以使用以下命令访问该uri</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell content query –-uri content://jakhar.aseem.diva.provider.notesprovider/notes</span><br></pre></td></tr></table></figure>

<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322234351285-255533229.png" alt="image-20220322234352521"></p>
<h4 id="第十二关-硬编码-第二部分"><a href="#第十二关-硬编码-第二部分" class="headerlink" title="第十二关 硬编码-第二部分"></a>第十二关 硬编码-第二部分</h4><p>随便输入</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322234519154-478736019.png" alt="image-20220322234520188"></p>
<p>在源码<code>Hardcode2Activity#access</code>，这里使用了DivaJni类</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322234635543-1098201335.png" alt="image-20220322234636623"></p>
<p>查看DivaJni类的代码</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322234838761-1732204680.png" alt="image-20220322234839930"></p>
<p>这里加载了divajni库，一般库文件都放在&#x2F;lib下，在目录下找到libdivajni.so文件</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322235156437-1322532202.png" alt="image-20220322235157544"></p>
<p>linux下可以使用strings查看二进制文件里的字符串</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322235505226-1937628888.png" alt="image-20220322235505909"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">__cxa_finalize</span><br><span class="line">__cxa_atexit</span><br><span class="line">Java_jakhar_aseem_diva_DivaJni_access</span><br><span class="line">Java_jakhar_aseem_diva_DivaJni_initiateLaunchSequence</span><br><span class="line">strcpy</span><br><span class="line">JNI_OnLoad</span><br><span class="line">_edata</span><br><span class="line">__bss_start</span><br><span class="line">_end</span><br><span class="line">libstdc++.so</span><br><span class="line">libm.so</span><br><span class="line">libc.so</span><br><span class="line">libdl.so</span><br><span class="line">libdivajni.so</span><br><span class="line">&lt;$!H</span><br><span class="line">olsdfgad;lh</span><br><span class="line">.dotdot</span><br><span class="line">;*3$&quot;</span><br><span class="line">GCC: (GNU) 4.9 20140827 (prerelease)</span><br><span class="line">gold 1.11</span><br><span class="line">.shstrtab</span><br><span class="line">.dynsym</span><br><span class="line">.dynstr</span><br><span class="line">.hash</span><br><span class="line">.rela.dyn</span><br><span class="line">.rela.plt</span><br><span class="line">.text</span><br><span class="line">.rodata</span><br><span class="line">.eh_frame</span><br><span class="line">.eh_frame_hdr</span><br><span class="line">.fini_array</span><br><span class="line">.init_array</span><br><span class="line">.dynamic</span><br><span class="line">.got</span><br><span class="line">.got.plt</span><br><span class="line">.data</span><br><span class="line">.bss</span><br><span class="line">.comment</span><br><span class="line">.note.gnu.gold-version</span><br></pre></td></tr></table></figure>

<p>逐个尝试，得到<code>olsdfgad;lh</code></p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322235832847-2033031412.png" alt="image-20220322235833870"></p>
<h4 id="第十三关-输入校验问题-第三部分"><a href="#第十三关-输入校验问题-第三部分" class="headerlink" title="第十三关 输入校验问题-第三部分"></a>第十三关 输入校验问题-第三部分</h4><p>随便试试</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220322235939256-2038808093.png" alt="image-20220322235939860"></p>
<p>当输入长的数据时，程序崩溃了，应该是缓冲区溢出了</p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220323000316997-96476980.png" alt="image-20220323000317916"></p>
<p>查看源码<code>InputValidation3Activity#push</code></p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220323000834795-1107643338.png" alt="image-20220323000835749"></p>
<p>查看该类的源码<a target="_blank" rel="noopener" href="https://github.com/payatu/diva-android/blob/master/app/src/main/jni/divajni.c%EF%BC%8C%E4%BD%BF%E7%94%A8%E7%9A%84%E6%98%AFstrcpy%EF%BC%8C%E5%85%B8%E5%9E%8B%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%8D%E5%88%B6%E6%BA%A2%E5%87%BA">https://github.com/payatu/diva-android/blob/master/app/src/main/jni/divajni.c，使用的是strcpy，典型的字符串复制溢出</a></p>
<p><img src="https://img2022.cnblogs.com/blog/1993367/202203/1993367-20220323001417565-1536880141.png" alt="image-20220323001418193"></p>
<h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/DmonezeCfUdx5_Bzr1lFuw">https://mp.weixin.qq.com/s/DmonezeCfUdx5_Bzr1lFuw</a></p>
</section>
    
        
        <h2 class="footline">
            <a href="/tags/APP/#APP">APP</a>
        </h2>
    

    <footer id="post-meta" class="clearfix">
        <a href="/about/">
        <img class="avatar" src="/images/avatar.png">
        <div>
            <span class="dark">kpa1on&#39;s Blog</span>
            <span>keep passion！</span>
        </div>
        </a>
        <section id="sharing">
            <a title="Share to Twitter" class="twitter" target="_blank" rel="noopener" href="https://twitter.com/intent/tweet?text=https://kpa1on.github.io/2022/03/22/APP%E6%B5%8B%E8%AF%95-DIVA/ - APP测试-DIVA @"><span class="icon-twitter">tweet</span></a>
            <a title="Share to Facebook" class="facebook" href="#" onclick="
                window.open(
                  'https://www.facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href),
                  'facebook-share-dialog',
                  'width=626,height=436');
                return false;"><span class="icon-facebook-sign">Share</span>
            </a>
        </section>
    </footer>


  <section id="comment">
    <button class="btn" id="loadcmts" onclick="cmts.load();">加载评论</button>
    <div id="gitment"></div>
    <script src='/js/gitment.browser.js'></script>
    <link rel="stylesheet" href=''>
    <script>
      var cmts={
        load:function cmts(){
          var gitment = new Gitment({
          
            id: "APP测试-DIVA",
          
            owner: "",
            repo: "",
            oauth: {
              client_id: "",
              client_secret: "",
            },
          })
          gitment.render('gitment');
          var loadcmt = document.getElementById("loadcmts");
          var imyourfather = loadcmt.parentNode;
          imyourfather.removeChild(loadcmts)
        }
      }
    </script>
  </section>


	<footer id="footer">
	<div id="social">
		<p class="small">©  kpa1on| Powered by Hexo & 
			<a target="_blank" rel="noopener" href="https://github.com/F0r3at/Lights"> Lights</a>
		</p>
	</div>
</footer>

</section>

	<script src="//cdnjs.loli.net/ajax/libs/instantclick/3.0.1/instantclick.min.js" data-no-instant></script>
	<script data-no-instant>
		
		InstantClick.init('mousedown');
	</script>



